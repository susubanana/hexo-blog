title: web基础--web工作原理
date: 2013-12-04 21:29:52
categories: [web开发]
tags: [web基础]
---

平时用浏览器，输入网址后回车，页面响应我们想要浏览的内容，简单操作的背后蕴涵了什么原理？

web工作原理
------------------

当输入url回车后，客户端（浏览器）会去请求DNS服务器，通过DNS获取域名对应的IP地址，然后通过这个地址找到对应的服务器，要求建立TCP连接，建立连接，客户端发送httpRequest（请求包）后，服务器接收并开始处理请求，调用自身服务，返回httpResponse（响应包），客户端收到响应包后开始渲染body主体，等到全部接收，断开与该服务器端的TCP连接。

<!--more-->

<img src="/images/cont/web-base-0.jpg" style="display:block;" />

可以简单归纳为：
* 客户端通过TCP/IP协议与服务器端建立TCP连接；
* 客户端发送httpRequest请求服务器端的资源；
* 服务器接收并开始处理请求，将处理得到的数据返回给客户端；
* 客户端与服务器端断开TCP连接，等待下一次请求。

URL
------------------

是统一资源定位符的英文缩写。包含协议，http服务器IP或者域名，端口号等。

DNS
------------------

域名系统的缩写。它是用于TCP/IP网络，从事将主机名或者域名翻译成IP地址的工作。

###DNS的工作模式

1. 当输入网址后，操作系统先检查本地hosts文件，看看是否有这个网址的映射关系。
2. 第一步没有映射关系，查找本地DNS缓存，有则返回，完成域名解析。
3. 第一二步没有映射关系，则查找TCP/IP协议首选的DNS服务器（本地DNS服务器），有则返回给客户端，完成域名解析。
4. 上面几步都失效的情况下，则根据本地DNS服务器的设置查询，一级一级的查询上层DNS服务器，最后将结果返回给本地服务器，本地服务器再返回给客户端。

<img src="/images/cont/web-base-01.jpg" style="display:block;" />

总的来说，浏览器最后发起请求时基于IP来和服务器交互的。




