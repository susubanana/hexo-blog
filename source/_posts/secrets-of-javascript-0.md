title: javascript作用域--执行环境
date: 2013-12-10 19:25:18
tags: [javascript探秘]
---

本文记录执行环境。

变量对象
-----------------
变量对象是与执行上下文相关的数据作用域。它是与上下文关联的特殊对象，用于存储被定义在上下文中的变量和函数声明。

活动对象
------------------
当函数被激活的时候，活动对象就会被激活，这个活动对象就是该函数的变量对象。

作用域链
-----------------

在当前函数中，可能会引用它的父函数变量，或者全局的变量，指向这些执行环境各自的变量对象引用组成一个作用域链。
<!--more-->
作用域链是指向变量对象的指针列表，只是引用但不包含变量对象，用以检索上下文代码中出现的标识符，如果这个变量在自己的作用域中没有，那么它会寻找父级的，直到最顶层。

当函数第一次被调用时，会创建一个执行环境和相应的作用域链，并把作用域链赋予给一个特殊的内部属性[[scope]]，在作用域链中，当前活动对象位于最前端，外部函数位于第二位，外部函数的外部函数处于第三位。。。直到全局对象的执行环境。

```sh
var variable = "outer";
function funcVariable() {
    var variable = "inner";
}
```
下图展示上面代码的作用域链：

<img src="/images/cont/secrets-of-javascript-0.jpg" style="display:block;" />